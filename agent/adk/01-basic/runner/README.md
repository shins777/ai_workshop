# ADK 멀티 에이전트 실행 예제 (01-basic/runner)

이 폴더는 ADK를 사용하여 **멀티 에이전트(Multi-Agent) 시스템**을 구축하고 실행하는 방법을 보여줍니다. 하나의 프로세스 내에서 루트 에이전트가 사용자의 요청에 따라 적절한 하위 에이전트(Sub-Agent)를 선택하여 협업하는 구조를 이해할 수 있습니다.

## 주요 구성 요소

### 1. 에이전트 정의 (`agent.py`)
이 파일에서는 상위-하위 계층 구조를 가진 에이전트들을 정의합니다.

- **`positive_critic`**: 사용자의 질문에 대해 긍정적인 면을 강조하여 리뷰를 작성하는 하위 에이전트입니다.
- **`negative_critic`**: 사용자의 질문에 대해 부정적인 면을 분석하여 리뷰를 작성하는 하위 에이전트입니다.
- **`root_agent`**: 시스템의 진입점 역할을 하는 상위 에이전트입니다. 사용자의 의도를 파악하여 `positive_critic` 또는 `negative_critic`에게 업무를 할당하거나 직접 답변합니다.

### 2. 통합 실행 노트북 (`run.ipynb`)
에이전트의 로컬 실행부터 클라우드 배포까지의 모든 과정을 담고 있습니다.

- **로컬 실행**: `Runner`와 `InMemorySessionService`를 사용하여 서버 배포 없이 로컬 환경에서 즉시 멀티 에이전트 로직을 테스트할 수 있습니다.
- **Vertex AI 배포**: 로컬에서 검증된 에이전트 구성을 `AdkApp`으로 패키징하여 **Vertex AI Agent Engine**에 배포합니다.
- **원격 호출 (SDK & REST)**: 배포된 원격 에이전트를 Python SDK 또는 REST API(requests)를 통해 호출하는 방법을 제공합니다.

## 실행 방법

### 사전 준비
1. 상위 폴더(`.env`)의 환경 변수(`GOOGLE_CLOUD_PROJECT`, `GOOGLE_GENAI_MODEL` 등)를 확인합니다.
2. Google Cloud 인증을 수행합니다:
   ```bash
   gcloud auth application-default login
   ```

### 단계별 실행
1. `run.ipynb` 파일을 엽니다.
2. **"로컬 실행"** 섹션을 통해 루트 에이전트가 질문에 따라 긍정적/부정적 리뷰 에이전트를 적절히 호출하는지 확인합니다.
   - 예: "AI에 대해 긍정적인 리뷰를 해줘" -> `positive_critic` 작동
3. **"배포"** 섹션의 코드를 실행하여 에이전트를 클라우드 환경으로 확장합니다.
4. **"원격 호출"** 섹션에서 클라우드에 배포된 에이전트와 대화합니다.

## 멀티 에이전트 워크플로우
ADK의 멀티 에이전트 시스템은 다음과 같이 동작합니다:
1. 사용자가 쿼리를 전달합니다.
2. **Root Agent**가 지침(Instruction)에 따라 하위 에이전트가 필요한지 판단합니다.
3. 필요한 경우 해당 **Sub-Agent**를 호출하여 결과를 얻습니다.
4. 최종 결과를 조합하여 사용자에게 응답합니다.

## 라이선스
이 프로젝트는 Apache License 2.0을 따릅니다.